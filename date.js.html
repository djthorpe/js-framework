<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: date.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: date.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* eslint-disable func-names */
/* eslint-disable no-extend-native */

const DATE_NEVER = -62135596800;

/**
 * @class Date
 */

/**
 * @function isLeapYear
 * @memberof Date
 * @returns boolean
 */
Date.prototype.isLeapYear = function () {
  const year = this.getFullYear();
  // eslint-disable-next-line no-bitwise
  if ((year &amp; 3) !== 0) {
    return false;
  }
  return ((year % 100) !== 0 || (year % 400) === 0);
};

/**
 * @function getDayOfYear
 * @memberof Date
 * @description Returns the day of the year, from 1 onwards
 * @returns number
 */
Date.prototype.getDayOfYear = function () {
  const dayCount = [0, 31, 59, 120, 151, 181, 212, 243, 273, 304, 334];
  const mn = this.getMonth();
  const dn = this.getDate();
  let dayOfYear = dayCount[mn] + dn;
  if (mn > 1 &amp;&amp; this.isLeapYear()) {
    dayOfYear += 1;
  }
  return dayOfYear;
};

/**
 * @function relativeDate
 * @memberof Date
 * @description Returns english-language relative date and time to the present date.
 *   For example, returns "just now" if the date is less than 30 seconds away from the
 *   present date. Returns time in the current locale if the date is more than sixty
 *   days ago. Does not yet work for dates and times in the future.
 * @returns string
 */
Date.prototype.relativeDate = function () {
  const delta = Math.round((new Date() - this) / 1000);
  if (delta &lt; 30) {
    return 'just now';
  }
  if (delta &lt; 60) {
    return `${delta} secs ago`;
  }
  if (delta === 60) {
    return '1 min ago';
  }
  const minutes = Math.floor(delta / 60);
  if (minutes &lt; 60) {
    return `${minutes} mins ago`;
  }
  const hours = Math.floor(minutes / 60);
  if (hours === 1) {
    return '1 hr ago';
  }
  if (hours &lt; 24) {
    return `${hours} hrs ago`;
  }
  const days = new Date().getDayOfYear() - this.getDayOfYear();
  if (days === 0) {
    return 'today';
  }
  if (days === 1) {
    return 'yesterday';
  }
  if (days &lt; 60) {
    return `${days} days ago`;
  }
  if (Math.round(this.getTime() / 1000) === DATE_NEVER) {
    return 'never';
  }
  return `on ${this.toLocaleDateString()}`;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Button.html">Button</a></li><li><a href="Controller.html">Controller</a></li><li><a href="Date.html">Date</a></li><li><a href="Emitter.html">Emitter</a></li><li><a href="Error.html">Error</a></li><li><a href="Form.html">Form</a></li><li><a href="List.html">List</a></li><li><a href="Model.html">Model</a></li><li><a href="Nav.html">Nav</a></li><li><a href="Number.html">Number</a></li><li><a href="Provider.html">Provider</a></li><li><a href="String.html">String</a></li><li><a href="Toast.html">Toast</a></li><li><a href="View.html">View</a></li></ul><h3>Events</h3><ul><li><a href="Button.html#event:button:click">button:click</a></li><li><a href="Form.html#event:form:change">form:change</a></li><li><a href="Form.html#event:form:submit">form:submit</a></li><li><a href="List.html#event:list:click">list:click</a></li><li><a href="Nav.html#event:nav:click">nav:click</a></li><li><a href="Provider.html#event:provider:added">provider:added</a></li><li><a href="Provider.html#event:provider:changed">provider:changed</a></li><li><a href="Provider.html#event:provider:completed">provider:completed</a></li><li><a href="Provider.html#event:provider:deleted">provider:deleted</a></li><li><a href="Provider.html#event:provider:error">provider:error</a></li><li><a href="Provider.html#event:provider:started">provider:started</a></li><li><a href="Toast.html#event:toast:hide">toast:hide</a></li><li><a href="Toast.html#event:toast:show">toast:show</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Apr 22 2021 12:08:29 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
